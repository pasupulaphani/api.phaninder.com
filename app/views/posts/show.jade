extends ../layout/top

block content
	.row
		section(role='main')
			#post.row
				.large-8.columns
					h1= post.title
					p= post.body
					span= post.created.toGMTString()
					p= loginShow

					if (loginShow || session.isLoggedIn)

						// delete should never be used
						//- form(name="deletePost", action="/posts/#{post._id}", method="post")
						//- 	input(type="hidden", name="_method", value="delete")
						//- 	input(type="submit", value="Delete Post")
						dl#post-admin.sub-nav
							dd#set-status
								script.
									function setPostStatus(state) {
										document.postStatusForm.status.value = state;
										document.postStatusForm.submit();
									}

								form(name="postStatusForm", action="/posts/#{post._id}/status", method="post")
									input(type="hidden", id="status", name="status", value="")

								- var status_info = {	U:"Under construction", Y:"Displayed", T:"Trashed"}
								a.small.secondary.radius.button.dropdown(href='#', data-dropdown='drop')= status_info[post.status]
								br
								ul#drop.f-dropdown(data-dropdown-content='data-dropdown-content')
									- for (var state in status_info) {
										-	if (post.status != state)
											li
												a(onclick="setPostStatus('#{state}')", href="javascript: void(0)")= status_info[state]
									- }

							dd#post-edit
									a.small.secondary.button(href="/posts/#{post._id}/edit")= "Edit Post"

						// This info is to just a fix to show dropdown buttons list
						// more info : https://github.com/zurb/foundation/issues/3922
						p
							b Post Info :
							br
							| author: #{post.user._id}
							br
							| last modified : #{post.modified.toGMTString()}

	include ../layout/bottom
